runtime: python27
api_version: 1
threadsafe: yes

default_expiration: "2h"

libraries:
- name: ssl
  version: latest
- name: lxml
  version: latest
- name: grpcio
  version: 1.0.0
- name: setuptools
  version: 36.6.0

env_variables:
  REDIS_CACHE_URL: redis://127.0.0.1:6379

builtins:
- deferred: on
- remote_api: on

handlers:
- url: /favicon.ico
  static_files: img/favicon.ico
  upload: img/favicon.ico

- url: /manifest.json
  static_files: img/manifest.json
  upload: img/manifest.json

- url: /css
  static_dir: css

- url: /img
  static_dir: img

- url: /testdata
  static_dir: tests/data
  application_readable: true

- url: /js
  static_dir: js

- url: /fonts
  static_dir: fonts

- url: "/terminsprogram/.*"
  script: main.app
  login: optional
  secure: optional

- url: /progress/.*
  script: main.app
  login: required
  secure: always

- url: /tasks/.*
  script: main.app
  login: admin
  secure: always
  
- url: /admin/.*
  script: main.app
  login: admin
  secure: always
  
- url: .*  # This regex directs all routes to main.app
  script: main.app
  login: required
  secure: always
