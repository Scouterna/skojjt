"use strict";var __awaiter=function(e,n,t,o){return new(t||(t=Promise))((function(r,i){function s(e){try{d(o.next(e))}catch(e){i(e)}}function c(e){try{d(o.throw(e))}catch(e){i(e)}}function d(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,c)}d((o=o.apply(e,n||[])).next())}))};document.addEventListener("DOMContentLoaded",()=>__awaiter(void 0,void 0,void 0,(function*(){console.log("script.ts loaded");const e=document.getElementById("ping"),n=document.getElementById("dbcheck"),t=fetch("/ping");try{yield t}catch(n){return console.error(n),void(e.innerText="Rest-API no respondse.")}const o=yield t;if(!o.ok)return void(e.innerText="Rest-API bad response status.");const r=o.json();try{yield r}catch(n){return console.error(n),void(e.innerText="Rest-API invalid response.")}if("pong"!==(yield r).ping)return void(e.innerText="Rest-API bad response.");e.innerText="Rest-API is working",n.innerText="Testing db-connection?";const i=fetch("/api/dbtest");try{yield i}catch(e){return console.error(e),void(n.innerText="DB-test no response")}const s=yield i;if(!s.ok)return void(n.innerText="DB-test bad response status.");const c=s.json();try{yield c}catch(e){return console.error(e),void(n.innerText="DB-test invalid response")}const d=yield c;d.ok&&!isNaN(d.count)?n.innerText="Database connection is working, counter = "+d.count+".":n.innerText="DB-test bad response"})));
//# sourceMappingURL=es6.js.map
